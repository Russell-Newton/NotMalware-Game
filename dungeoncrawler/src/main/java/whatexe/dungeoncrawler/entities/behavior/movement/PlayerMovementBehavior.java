package whatexe.dungeoncrawler.entities.behavior.movement;

import javafx.beans.property.SimpleDoubleProperty;
import whatexe.dungeoncrawler.entities.Player;
import whatexe.dungeoncrawler.entities.behavior.EntityBehavior;
import whatexe.dungeoncrawler.entities.motionsupport.Vector;

public class PlayerMovementBehavior extends EntityBehavior<Player> implements MovementBehavior {
    private final SimpleDoubleProperty speed;
    private boolean goingUp;
    private boolean goingLeft;
    private boolean goingRight;
    private boolean goingDown;

    public PlayerMovementBehavior(Player owningEntity) {
        super(owningEntity);
        speed = new SimpleDoubleProperty();
        speed.bindBidirectional(owningEntity.speedProperty());
    }

    @Override
    public Vector getMovement() {
        int dx = 0;
        int dy = 0;
        if (goingUp) {
            dy--;
        }
        if (goingDown) {
            dy++;
        }
        if (goingRight) {
            dx++;
        }
        if (goingLeft) {
            dx--;
        }

        Vector movement = new Vector(dx, dy);
        if (movement.isZero()) {
            return movement;
        }

        return movement.unit().scaledBy(speed.get());
    }

    public boolean isGoingUp() {
        return goingUp;
    }

    public void setGoingUp(boolean goingUp) {
        this.goingUp = goingUp;
    }

    public boolean isGoingLeft() {
        return goingLeft;
    }

    public void setGoingLeft(boolean goingLeft) {
        this.goingLeft = goingLeft;
    }

    public boolean isGoingRight() {
        return goingRight;
    }

    public void setGoingRight(boolean goingRight) {
        this.goingRight = goingRight;
    }

    public boolean isGoingDown() {
        return goingDown;
    }

    public void setGoingDown(boolean goingDown) {
        this.goingDown = goingDown;
    }

}
