package whatexe.dungeoncrawler.entities.behavior.attack;

import javafx.beans.property.SimpleIntegerProperty;
import whatexe.dungeoncrawler.entities.Player;
import whatexe.dungeoncrawler.entities.behavior.EntityBehavior;

public abstract class SpecialAttackBehavior extends EntityBehavior<Player>
        implements AttackBehavior {

    private final SimpleIntegerProperty maxRecharge;
    protected int recharge;

    public SpecialAttackBehavior(Player owningEntity, int maxRecharge) {
        super(owningEntity);

        this.maxRecharge = new SimpleIntegerProperty(maxRecharge);
        recharge = getMaxRecharge();
    }

    @Override
    public final void attack() {
        if (recharge == getMaxRecharge()) {
            execute();
        }
    }

    protected abstract void execute();

    public int getMaxRecharge() {
        return maxRecharge.get();
    }

    public void setMaxRecharge(int maxRecharge) {
        this.maxRecharge.set(maxRecharge);
    }

    public SimpleIntegerProperty maxRechargeProperty() {
        return maxRecharge;
    }

    public void recharge() {
        recharge = Math.min(recharge + 1, getMaxRecharge());
    }
}
