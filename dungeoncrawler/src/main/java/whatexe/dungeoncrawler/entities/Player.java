package whatexe.dungeoncrawler.entities;

import javafx.beans.property.SimpleIntegerProperty;
import javafx.scene.Node;
import javafx.scene.shape.Rectangle;
import whatexe.dungeoncrawler.entities.behavior.PlayerBehaviorSet;
import whatexe.dungeoncrawler.entities.behavior.attack.PlayerAttackBehavior;
import whatexe.dungeoncrawler.entities.behavior.movement.PlayerMovementBehavior;
import whatexe.dungeoncrawler.layout.rooms.Room;


public class Player extends Entity {

    private final SimpleIntegerProperty money;

    public Player(Node displayNode) {
        super(displayNode, null);
        canTick = true;

        money = new SimpleIntegerProperty();

        behaviorSet.set(new PlayerBehaviorSet(this, 5));
    }

    public void initControls() {
        ((PlayerBehaviorSet) behaviorSet.get()).initControls();
    }

    public SimpleIntegerProperty moneyProperty() {
        return money;
    }

    public void setMoney(int money) {
        this.money.set(money);
    }

    public void adjustMoney(int dMoney) {
        money.set(money.getValue() + dMoney);
    }

    public void setCurrentRoom(Room currentRoom) {
        this.owningRoom = currentRoom;
    }

    public double getHeight() {
        return ((Rectangle) displayNode).getHeight();
    }

    public double getWidth() {
        return ((Rectangle) displayNode).getWidth();
    }

    public double getSpeed() {
        return getPlayerMovementBehavior().getSpeed();
    }

    public void setSpeed(double speed) {
        getPlayerMovementBehavior().setSpeed(speed);
    }

    public int getAttackDamage() {
        return getPlayerAttackBehavior().getAttackDamage();
    }

    public void setAttackDamage(int attackDamage) {
        getPlayerAttackBehavior().setAttackDamage(attackDamage);
    }

    public int getAttackDelay() {
        return getPlayerAttackBehavior().getAttackDelay();
    }

    public void setAttackDelay(int delay) {
        getPlayerAttackBehavior().setAttackDelay(delay);
    }

    private PlayerAttackBehavior getPlayerAttackBehavior() {
        return getBehaviorSet().getCastedAttackBehavior(PlayerAttackBehavior.class);
    }

    private PlayerMovementBehavior getPlayerMovementBehavior() {
        return getBehaviorSet().getCastedMovementBehavior(PlayerMovementBehavior.class);
    }
}
