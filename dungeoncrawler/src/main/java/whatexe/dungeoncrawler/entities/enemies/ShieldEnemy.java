package whatexe.dungeoncrawler.entities.enemies;

import javafx.scene.paint.Color;
import javafx.scene.shape.Rectangle;
import whatexe.dungeoncrawler.Sprite;
import whatexe.dungeoncrawler.entities.behavior.movement.PathFollowingBehavior;
import whatexe.dungeoncrawler.entities.motionsupport.Vector;
import whatexe.dungeoncrawler.layout.rooms.Room;

public class ShieldEnemy extends Enemy {

    public ShieldEnemy(Room owningRoom) {
        super(Sprite.asRectangle(32, 32, Color.RED), 50, owningRoom);

        entityStatistics.setAttackDamage(1);

        // Set motion
        Vector roomCenter = new Vector(owningRoom.getBackgroundImage().getWidth() / 2,
                                       owningRoom.getBackgroundImage().getHeight() / 2);
        Vector toCenter =
                roomCenter.minus(new Vector(getDisplayNode().getBoundsInParent().getCenterX(),
                                            getDisplayNode().getBoundsInParent().getCenterY()));
        int xScale = toCenter.dot(new Vector(1, 0)) > 0 ? -1 : 1;
        int yScale = toCenter.dot(new Vector(0, 1)) > 0 ? -1 : 1;

        getBehaviorSet().setMovementBehavior(
                new PathFollowingBehavior(this,
                                          PathFollowingBehavior.FollowType.LOOP,
                                          new Vector(0, 0),
                                          new Vector(xScale * 50, 0),
                                          new Vector(xScale * 50, yScale * 50),
                                          new Vector(0, yScale * 50),
                                          new Vector(0, 0)));
    }
}
