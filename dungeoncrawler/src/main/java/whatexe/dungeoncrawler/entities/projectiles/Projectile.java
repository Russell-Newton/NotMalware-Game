package whatexe.dungeoncrawler.entities.projectiles;

import javafx.scene.shape.Circle;
import javafx.scene.shape.Rectangle;
import whatexe.dungeoncrawler.entities.enemies.Entity;
import whatexe.dungeoncrawler.entities.motionsupport.Vector;
import whatexe.dungeoncrawler.layout.rooms.Room;

public abstract class Projectile extends Entity {
    private int speed;
    private final int length;
    private final int width;
    private final Vector direction;

    public Projectile(Room owningRoom, int length, int width, int speed, Vector direction) {
        super(new Circle(2), owningRoom);
        canTick = true;
        this.length = length;
        this.width = width;
        this.speed = speed;
        this.direction = direction;

    }

    public void handleOnEntityCollision(Entity other) {
        owningRoom.removeEntity(this);
    }

    @Override
    public void handleOnBoundaryCollision() {
        owningRoom.removeEntity(this);
    }

    @Override
    public void tick() {
        double dx = speed * direction.unit().getV()[0];
        double dy = speed * direction.unit().getV()[1];

        moveNode(dx, dy);
    }

    public int getSpeed() {
        return speed;
    }

    public void setSpeed(int speed) {
        this.speed = speed;
    }

    public double getHeight() {
        return ((Rectangle) displayNode).getHeight();
    }

    public double getWidth() {
        return ((Rectangle) displayNode).getWidth();
    }


}
