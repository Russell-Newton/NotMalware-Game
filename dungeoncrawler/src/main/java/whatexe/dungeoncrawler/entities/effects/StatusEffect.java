package whatexe.dungeoncrawler.entities.effects;

import whatexe.dungeoncrawler.entities.Entity;

public abstract class StatusEffect {

    private final Entity owningEntity;
    private int lifetime;
    private boolean shouldRemove;

    public StatusEffect(Entity owningEntity, int lifetime) {
        this.owningEntity = owningEntity;
        this.lifetime = lifetime;

        owningEntity.getStatusEffects().add(this);
        onAdd();
    }

    protected abstract void onAdd();

    protected abstract void onRemove();

    protected abstract void onTick();

    public final void tick() {
        if (lifetime == 0) {
            shouldRemove = true;
            onRemove();
            return;
        }

        lifetime = Math.max(0, lifetime - 1);

        onTick();
    }

    public boolean shouldRemove() {
        return shouldRemove;
    }
}
