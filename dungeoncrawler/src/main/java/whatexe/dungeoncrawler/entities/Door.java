package whatexe.dungeoncrawler.entities;

import javafx.scene.Node;
import whatexe.dungeoncrawler.layout.Direction;
import whatexe.dungeoncrawler.layout.Level;

public abstract class Door extends Entity {
    protected final Level owningLevel;
    protected final Direction direction;

    public Door(Node displayNode, Level owningLevel, Direction direction) {
        super(displayNode);
        this.owningLevel = owningLevel;
        this.direction = direction;
        initListeners();
    }

    /**
     * Initialize listeners for the door, like the ones that react to the Player overlapping the
     * displayNode.
     */
    protected abstract void initListeners();

    public void onOverlap() {
        switch (direction) {
        case UP:
            owningLevel.moveUp();
            break;
        case LEFT:
            owningLevel.moveLeft();
            break;
        case RIGHT:
            owningLevel.moveRight();
            break;
        case DOWN:
            owningLevel.moveDown();
            break;
        default:
            throw new IllegalStateException("Unexpected value: " + direction);
        }
    }


}
