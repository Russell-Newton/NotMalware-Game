package whatexe.dungeoncrawler.entities.player;

import javafx.beans.property.SimpleIntegerProperty;
import whatexe.dungeoncrawler.entities.Sprite;
import whatexe.dungeoncrawler.entities.behavior.EntityStatistics;
import whatexe.dungeoncrawler.entities.behavior.presets.PlayerBehaviorSet;
import whatexe.dungeoncrawler.entities.friends.Friend;
import whatexe.dungeoncrawler.layout.rooms.Room;


public class Player extends Friend {

    private final Inventory inventory;
    private final SimpleIntegerProperty money;
    private final MalwareType malwareType;

    public Player(Sprite displayNode, MalwareType malwareType) {
        super(displayNode, null, malwareType.getDefaultStatModifiers());
        canTick = true;

        money = new SimpleIntegerProperty();
        inventory = new Inventory();
        this.malwareType = malwareType;

        entityStatistics.setSpeed(2);

        behaviorSet.set(malwareType.getDefaultBehaviorSet(this));

    }

    public static EntityStatistics getDefaultPlayerStatistics() {
        return new EntityStatistics(50,
                                    5,
                                    50,
                                    2,
                                    1,
                                    1,
                                    1);
    }

    public void initControls() {
        ((PlayerBehaviorSet) behaviorSet.get()).initControls();
    }

    public SimpleIntegerProperty moneyProperty() {
        return money;
    }

    public int getMoney() {
        return money.get();
    }

    public void setMoney(int money) {
        this.money.set(money);
    }

    public void adjustMoney(int dMoney) {
        money.set(money.getValue() + dMoney);
    }

    public void setCurrentRoom(Room currentRoom) {
        this.owningRoom = currentRoom;
    }

    public MalwareType getMalwareType() {
        return malwareType;
    }

    public Inventory getInventory() {
        return inventory;
    }

    public void recharge() {
        ((PlayerBehaviorSet) getBehaviorSet()).getSpecialAttackBehavior().recharge();
    }
}
