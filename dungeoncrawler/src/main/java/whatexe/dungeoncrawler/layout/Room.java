package whatexe.dungeoncrawler.layout;

import javafx.embed.swing.SwingFXUtils;
import javafx.scene.image.Image;
import whatexe.dungeoncrawler.entities.Entity;
import whatexe.tileengine.TiledMap;

import java.util.ArrayList;
import java.util.List;

public abstract class Room {
    /*
    TODO - For Chase and Russell:
        - Allow creation from a TiledMap, including background image and ObjectGroups.
        - Consider creating inner enum or subclasses (make Room abstract) for Room types.
     */

    protected Image backgroundImage;
    protected List<Entity> entities;
    protected Level owningLevel;
    protected TiledMap fromTiledMap;

    public Room(TiledMap fromTiledMap, Level owningLevel, Direction... directionsToGenerate) {
        if (fromTiledMap == null) {
            this.backgroundImage = null;
        } else {
            this.backgroundImage = SwingFXUtils.toFXImage(fromTiledMap.getMapImage(), null);
        }
        this.entities = new ArrayList<>();
        this.owningLevel = owningLevel;
        this.fromTiledMap = fromTiledMap;

        initDoors(directionsToGenerate);
        initEntities();
    }

    protected abstract void initDoors(Direction[] directionsToGenerate);

    /**
     * Populate the {@link Room#entities} list.
     */
    protected abstract void initEntities();
}
