package whatexe.dungeoncrawler.layout.rooms;

import javafx.scene.control.Button;
import whatexe.dungeoncrawler.MainApp;
import whatexe.dungeoncrawler.entities.ExitLevelDoor;
import whatexe.dungeoncrawler.layout.Direction;
import whatexe.dungeoncrawler.layout.Level;
import whatexe.tileengine.TiledMap;

import java.io.IOException;

public class BossRoom extends SimpleRoom {

    public BossRoom(TiledMap fromTiledMap, Level owningLevel, Direction fromDirection) {
        super(fromTiledMap, owningLevel, fromDirection);
    }

    @Override
    protected void initDoors(Direction[] directionsToGenerate) {
        super.initDoors(directionsToGenerate);

        // TODO - add door for leaving, which will switch off of "Level" scene and into "Win"
        Button endButton = new Button("Infiltrate");
        endButton.setOnAction(event -> {
            try {
                MainApp.switchScene("EndScreen");
            } catch (IOException e) {
                System.out.println("Could not load end room");
                e.printStackTrace();
            }
        });
        endButton.setTranslateX(this.backgroundImage.getWidth() / 2);
        endButton.setTranslateY(this.backgroundImage.getHeight() / 2);
        endButton.setPrefWidth(100);
        endButton.setPrefHeight(25);

        //TODO Need to differentiate exit door from other room doors (possibly by adding another
        // enum
        this.doors.add(new ExitLevelDoor(endButton,
                                         owningLevel,
                                         this));
    }

}
