package whatexe.dungeoncrawler.layout;

import javafx.scene.control.Button;
import whatexe.dungeoncrawler.entities.SimpleDoor;
import whatexe.tileengine.MapObject;
import whatexe.tileengine.TiledMap;

import java.util.Collections;
import java.util.List;

public class BossRoom extends SimpleRoom {

    public BossRoom(TiledMap fromTiledMap, Level owningLevel, Direction fromDirection) {
        super(fromTiledMap, owningLevel, fromDirection);
    }

    @Override
    protected void initDoors(Direction[] directionsToGenerate) {
        super.initDoors(directionsToGenerate);
        List<MapObject> doorMapObject = fromTiledMap.getObjectGroups().get("Doors").getObjects();
        Collections.sort(doorMapObject, new MapObjectComparator());

        for (Direction direction : directionsToGenerate) {
            MapObject correspondingDoor;
            Button button = new Button(direction.toString());

            correspondingDoor = doorMapObject.get(direction.ordinal());
            button.setOnAction(event -> owningLevel.move(direction));

            button.setTranslateX(correspondingDoor.getX());
            button.setTranslateY(correspondingDoor.getY());
            button.prefWidth(correspondingDoor.getWidth());
            button.prefHeight(correspondingDoor.getHeight());
            // button.resize(correspondingDoor.getWidth(), correspondingDoor.getHeight());
            doors.add(new SimpleDoor(button, owningLevel, direction));
        }
        // TODO - add door for leaving, which will switch off of "Level" scene and into "Win"
        Button endButton = new Button("Infiltrate");
        endButton.setOnAction(event -> );
    }

    @Override
    protected void initEntities() {

    }

}
