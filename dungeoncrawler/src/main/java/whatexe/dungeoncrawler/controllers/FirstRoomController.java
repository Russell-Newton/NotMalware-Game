package whatexe.dungeoncrawler.controllers;

import javafx.fxml.FXML;
import javafx.scene.SubScene;
import javafx.scene.control.Label;
import javafx.scene.control.ProgressBar;
import whatexe.dungeoncrawler.Difficulty;
import whatexe.dungeoncrawler.ManagedController;

import java.util.Map;

public class FirstRoomController extends ManagedController {

    @FXML
    private ProgressBar healthBar; // health bar
    @FXML
    private Label topExit;
    @FXML
    private Label botExit;
    @FXML
    private Label leftExit;
    @FXML
    private Label rightExit;
    @FXML
    private SubScene subScene;

    private Difficulty difficulty = Difficulty.NORMAL;

    private int totalHealth;

    @FXML
    protected void updateHealthBar() { // implement healthBar method here

    }

    @Override
    public void init() {
        // SceneManager.getInstance().addScene("Next Room",
        //         getClass().getResource("NextRoom.fxml"));
        // Recommended setup
        initHealthBar();
        exitRandomize();
        System.out.println("Initialized First Room");
    }

    protected void initHealthBar() {
        if (difficulty == Difficulty.HARD) { //just example variables
            totalHealth = 100;
        } else if (difficulty == Difficulty.NORMAL) {
            totalHealth = 50;
        } else {
            totalHealth = 20;
        }
        healthBar.setProgress(1);
    }

    protected void exitRandomize() {
        Label[] exitArray = {topExit, botExit, leftExit, rightExit};
        for (Label exit : exitArray) {
            exit.setVisible((int) (Math.random() * 2) != 0);
        }
    }

    @Override
    public void init(Map<String, ?> loadParameters) {
        super.init(loadParameters);
        if (loadParameters.containsKey("difficulty")) {
            difficulty = (Difficulty) loadParameters.get("difficulty");
        }
        // difficulty = (Difficulty) loadParameters.getOrDefault("difficulty", Difficulty.NORMAL);
    }
}
