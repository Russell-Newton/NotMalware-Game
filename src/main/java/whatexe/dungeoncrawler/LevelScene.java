package whatexe.dungeoncrawler;

import javafx.embed.swing.SwingFXUtils;
import javafx.scene.Group;
import javafx.scene.Scene;
import javafx.scene.canvas.Canvas;
import javafx.scene.canvas.GraphicsContext;
import javafx.scene.image.Image;
import javafx.scene.layout.AnchorPane;
import javafx.scene.paint.Color;

import javax.imageio.ImageIO;
import java.io.File;
import java.io.IOException;
import java.util.ArrayList;

public class LevelScene {
    private final int WIDTH;
    private final int HEIGHT;
    private final int TILESIZE = 32;
    private final int ROWS;
    private final int COLS;
    private Tiles tiles;

    public LevelScene(int width, int height, String url) throws IOException {
        this.HEIGHT = height;
        this.WIDTH = width;
        this.ROWS = height / TILESIZE;
        this.COLS = width / TILESIZE;
        tiles = new Tiles(url);
    }

    public Scene getScene(){
        Group root = new Group();
        Canvas canvas = new Canvas(WIDTH, HEIGHT);
        GraphicsContext gc = canvas.getGraphicsContext2D();
        drawFloor(gc);
        canvas.setScaleY(2);
        canvas.setScaleX(2);
        root.getChildren().add(canvas);
        Scene scene = new Scene(root);
        return scene;
    }

    public void drawFloor(GraphicsContext gc) {
        for (int i = 0; i < ROWS; i++) {
            for (int j = 0; j < COLS; j++) {
                gc.drawImage(tiles.getRandFloorTile(), j * TILESIZE, i * TILESIZE);
                if (i == 0) {
                    gc.drawImage(tiles.getTile(new Coordinate(4, 0)), j * TILESIZE, i * TILESIZE);
                }
                if (i == 1) {
                    gc.drawImage(tiles.getTile(new Coordinate(4, 1)), j * TILESIZE, i * TILESIZE);
                }
            }
        }
    }



}
